# 사용자 입력 구조 설계 v1.0

온보딩부터 운동 피드백까지 입력 구조를 정의한 버전입니다. 수정 시 버전 넘버를 올리고 변경 내역을 명확히 기록하세요.

## A. 온보딩 & 동의
- 약관/개인정보/건강 데이터 동의(필수/선택 구분)
- 안내 문구: “본 서비스는 의료행위가 아닌 자가 건강관리 코칭입니다. 통증이 심하면 의료기관 방문.”

## B. 기본 정보(필수)
| 항목 | 타입 | 예시 |
| --- | --- | --- |
| 연령대 | 선택 | 10대 / 20대 / 30대 / 40대 / 50대 / 60대+ |
| 성별 | 선택 | 남 / 여 |
| 키 | 숫자 | 175 cm |
| 몸무게 | 숫자 | 70 kg |

## C. 증상 입력(문진 플로우)
### C-1. 통증 부위
- 바디맵, 최대 2부위 선택. 목/허리/어깨/팔꿈치/손목/손가락/무릎/엉덩이/발목
- 2부위 이상일 때 “가장 불편한 부위?” 추가 질문

### C-2. 통증 양상·유발(최대 3개)
- 무릎 예시: 계단, 쪼그림, 오래 걷기 후, 아침 뻣뻣, 붓기·열감, 러닝
- 어깨 예시: 팔 들기, 빗질, 야간통, 뒤로 돌릴 때, 딱 소리

### C-3. 통증 강도(NRS/VAS)
- 슬라이더 0~10, 0=통증 없음 / 10=견딜 수 없음 (표정/캡션 시각화)

### C-4. 통증 지속기간
- 1주 미만 / 1주~1개월 / 1~3개월 / 3~6개월 / 6개월 이상

### C-5. 외상/수술 병력
- 최근 3개월 외상 여부, 수술 여부/종류(TKA/THA/ORIF/관절경/기타), 수술 시기(개월)

### C-6. 기능 제한도(ADL)
- 제한 없음 / 오래 걷기 어려움 / 계단 힘듦 / 보조기구 필요 / 일상생활 어려움

### C-7. 염증 및 기타
- 부종/열감, 야간통, 잠김/무력감 (예/아니오)

### C-8. 레드 플래그(응급)
- 발열 ≥38℃, 고강도 외상, 감각저하·근력 약화, 대소변 조절 이상, 종창·호흡곤란(색전증 의심) 등
- 1개라도 예 → 응급 알림 + 운동 루틴 잠금 + 병원 안내

## D. 추가 정보(선택)
- 기저질환(당뇨/고혈압/골다공증/류마티스/통풍)
- 복용 약(NASAIDs/스테로이드 주사 등)
- 보유 기기(스마트워치, TV 미러링 여부)

## E. 감별진단 버킷 예시(무릎)
- OA형(퇴행성), Inflammatory형, Meniscus형, ACL/PCL형, Post-op형, PFPS형

## F. 루틴 매핑(버킷별 예시)
- OA형: 등척성, Heel Slide, Hamstring Stretch
- Meniscus형: ROM 회복, 저부하 근력
- TKA형: Ankle pump, SLR 등 초기 회복
- PFPS형: 대퇴사두근/밸런스 강화
- ITB형: 장경인대 스트레칭/폼롤러
- 난이도 상/중/하, NRS ≥7점 2일 지속 시 자동 강도 하향

## G. 법적 안전장치
- “유형” 중심 표현, “의료진 자문 기반” 표시
- 레드플래그 시 운동 자동 중단
- 초기 동의서에 “비의료행위” 명시

## H. 점수 기반 감별진단 엔진 개요
- 입력: 나이/성별/부위/외상/양상 등 → 버킷(OA, Meniscus, ACL, PFPS 등)
- 기여도: 신호별 +점수 합산, 최대 점수 버킷이 결과(근소 2위는 보조 가능성)
- 예시(무릎): 연령≥50 +2(OA), 계단/쪼그림 +2(OA), 잠김 +2(Meniscus), 외상 +3(ACL) 등
- 해석 기준: ≥6 High, 3~5 Moderate, <3 불명확
- 확장: softmax confidence, logistic 회귀 전환, 정규화, 월별 밸런스 튜닝

## I. 운동/피드백 입력
- 운동 전: 컨디션(나쁨/보통/좋음/아주 좋음), 통증 NRS 1~10
- 운동 중: 중지/넘기기 버튼(통증 시)
- 운동 후:
  - RPE(8/11/14/18) – 내부용
  - 근육 자극 1~3, 땀 배출 1~4
  - 자가 평가 데이터는 개인화 강도 조절(세트/랩/운동 난이도)에 사용

## J. 신체 점수 로직(자가 평가 → 변수 조절)
- 사전 체력 문항(쉬지 않고 Squat/Push-up/Step-up/Plank 수행량)으로 레벨 L1~L4 결정
  - 예) Squat 0~5개=L1, 6~11=L2, 12~17=L3, 18+ =L4 등
- 레벨 총합 → 신체 점수 구간: Lv D 4~7, C 8~10, B 11~13, A 14~16
- 일정 기간 루틴 진행 후 RPE/자가평가 합산에 따라 신체 점수 ± 조정 → 새 변수(난이도, 세트/랩, 운동 개수) 적용
- 과도한 잦은 조정은 피하고 주기 단위로 반영

## K. 버전 정보
- 본 문서: 사용자 입력 구조 v1.0
- 무릎 설문: v1.1 (`docs/knee/form_v1.1.md`)
- 무릎 가중치표: v1.1 (`docs/knee/weights_v1.1.md`)
- 무릎 운동 라이브러리: v1.0 (E01~E50, 별도 표/자료)
